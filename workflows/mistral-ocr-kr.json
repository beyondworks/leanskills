{
  "name": "[ë¬¸ì„œì²˜ë¦¬] Mistral OCR ë¬¸ì„œ/ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ì¶”ì¶œ",
  "nodes": [
    {
      "id": "trigger",
      "name": "ìˆ˜ë™ ì‹¤í–‰",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [0, 100],
      "parameters": {},
      "typeVersion": 1,
      "notesInFlow": true,
      "notes": "ğŸš€ ì›Œí¬í”Œë¡œìš° ì‹œì‘ì \n\ní…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì›Œí¬í”Œë¡œìš°ê°€ ì‹œì‘ë©ë‹ˆë‹¤."
    },
    {
      "id": "doc-url",
      "name": "ë¬¸ì„œ URL ì„¤ì •",
      "type": "n8n-nodes-base.set",
      "position": [240, 0],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {"id": "1", "name": "url", "type": "string", "value": "https://example.com/document.pdf"},
            {"id": "2", "name": "type", "type": "string", "value": "document"}
          ]
        }
      },
      "typeVersion": 3.4,
      "notesInFlow": true,
      "notes": "ğŸ“„ PDF ë¬¸ì„œ URL ì„¤ì •\n\nì²˜ë¦¬í•  PDF ë¬¸ì„œì˜ ê³µê°œ URLì„ ì…ë ¥í•˜ì„¸ìš”.\n\nâš ï¸ URLì€ ê³µê°œì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤."
    },
    {
      "id": "img-url",
      "name": "ì´ë¯¸ì§€ URL ì„¤ì •",
      "type": "n8n-nodes-base.set",
      "position": [240, 200],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {"id": "1", "name": "url", "type": "string", "value": "https://example.com/image.png"},
            {"id": "2", "name": "type", "type": "string", "value": "image"}
          ]
        }
      },
      "typeVersion": 3.4,
      "notesInFlow": true,
      "notes": "ğŸ–¼ï¸ ì´ë¯¸ì§€ URL ì„¤ì •\n\nì²˜ë¦¬í•  ì´ë¯¸ì§€ì˜ ê³µê°œ URLì„ ì…ë ¥í•˜ì„¸ìš”.\n\nì§€ì› í˜•ì‹: PNG, JPG, JPEG, GIF, WEBP"
    },
    {
      "id": "doc-ocr",
      "name": "ë¬¸ì„œ OCR ì²˜ë¦¬",
      "type": "n8n-nodes-base.httpRequest",
      "position": [480, 0],
      "parameters": {
        "url": "https://api.mistral.ai/v1/ocr",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n  \"model\": \"mistral-ocr-latest\",\n  \"document\": {\n    \"type\": \"document_url\",\n    \"document_url\": \"{{ $json.url }}\"\n  }\n}",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "mistralCloudApi"
      },
      "typeVersion": 4.2,
      "notesInFlow": true,
      "notes": "ğŸ“‘ Mistral OCR - ë¬¸ì„œ ì²˜ë¦¬\n\nPDF ë¬¸ì„œë¥¼ ë¶„ì„í•˜ì—¬ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.\n\nâš ï¸ ì„¤ì • í•„ìš”:\n- Mistral Cloud API ìê²©ì¦ëª…"
    },
    {
      "id": "img-ocr",
      "name": "ì´ë¯¸ì§€ OCR ì²˜ë¦¬",
      "type": "n8n-nodes-base.httpRequest",
      "position": [480, 200],
      "parameters": {
        "url": "https://api.mistral.ai/v1/ocr",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n  \"model\": \"mistral-ocr-latest\",\n  \"document\": {\n    \"type\": \"image_url\",\n    \"image_url\": \"{{ $json.url }}\"\n  }\n}",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "mistralCloudApi"
      },
      "typeVersion": 4.2,
      "notesInFlow": true,
      "notes": "ğŸ–¼ï¸ Mistral OCR - ì´ë¯¸ì§€ ì²˜ë¦¬\n\nì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ì—¬ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.\n\nì§€ì›: ìµœëŒ€ 10,000í”½ì…€ ì´ë¯¸ì§€"
    },
    {
      "id": "merge-results",
      "name": "ê²°ê³¼ ë³‘í•©",
      "type": "n8n-nodes-base.merge",
      "position": [720, 100],
      "parameters": {"mode": "combine", "combinationMode": "mergeByPosition"},
      "typeVersion": 3.2,
      "notesInFlow": true,
      "notes": "ğŸ”„ OCR ê²°ê³¼ ë³‘í•©\n\në¬¸ì„œì™€ ì´ë¯¸ì§€ OCR ê²°ê³¼ë¥¼ ë³‘í•©í•©ë‹ˆë‹¤."
    },
    {
      "id": "extract-text",
      "name": "í…ìŠ¤íŠ¸ ì¶”ì¶œ",
      "type": "n8n-nodes-base.code",
      "position": [960, 100],
      "parameters": {
        "jsCode": "// OCR ê²°ê³¼ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ\nconst results = [];\n\nfor (const item of $input.all()) {\n  const ocrResult = item.json;\n  \n  // í˜ì´ì§€ë³„ í…ìŠ¤íŠ¸ ì¶”ì¶œ\n  let extractedText = '';\n  if (ocrResult.pages) {\n    extractedText = ocrResult.pages\n      .map((page, idx) => `[í˜ì´ì§€ ${idx + 1}]\\n${page.markdown || page.text || ''}`)\n      .join('\\n\\n');\n  } else if (ocrResult.text) {\n    extractedText = ocrResult.text;\n  } else if (ocrResult.markdown) {\n    extractedText = ocrResult.markdown;\n  }\n  \n  results.push({\n    json: {\n      sourceUrl: item.json.url || 'N/A',\n      pageCount: ocrResult.pages?.length || 1,\n      extractedText: extractedText,\n      rawResponse: ocrResult\n    }\n  });\n}\n\nreturn results;"
      },
      "typeVersion": 2,
      "notesInFlow": true,
      "notes": "ğŸ“ í…ìŠ¤íŠ¸ ì¶”ì¶œ ë° ì •ë¦¬\n\nOCR ê²°ê³¼ì—ì„œ í˜ì´ì§€ë³„ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•˜ê³  ì •ë¦¬í•©ë‹ˆë‹¤.\n\nì¶œë ¥:\n- sourceUrl: ì›ë³¸ URL\n- pageCount: í˜ì´ì§€ ìˆ˜\n- extractedText: ì¶”ì¶œëœ í…ìŠ¤íŠ¸"
    },
    {
      "id": "slack-notify",
      "name": "Slack ê²°ê³¼ ì•Œë¦¼",
      "type": "n8n-nodes-base.slack",
      "position": [1200, 100],
      "parameters": {
        "select": "channel",
        "channelId": {"__rl": true, "mode": "name", "value": "#general"},
        "text": "=:page_facing_up: *Mistral OCR ì²˜ë¦¬ ì™„ë£Œ*\n\n:link: *ì›ë³¸:* {{ $json.sourceUrl }}\n:page_with_curl: *í˜ì´ì§€ ìˆ˜:* {{ $json.pageCount }}\n\n:pencil: *ì¶”ì¶œëœ í…ìŠ¤íŠ¸ (ë¯¸ë¦¬ë³´ê¸°)*\n```\n{{ $json.extractedText.substring(0, 500) }}{{ $json.extractedText.length > 500 ? '...' : '' }}\n```\n\n:information_source: ì „ì²´ í…ìŠ¤íŠ¸ëŠ” n8n ì‹¤í–‰ ê²°ê³¼ì—ì„œ í™•ì¸í•˜ì„¸ìš”.",
        "otherOptions": {}
      },
      "typeVersion": 2.3,
      "notesInFlow": true,
      "notes": "ğŸ“¢ Slack ê²°ê³¼ ì•Œë¦¼\n\nOCR ì²˜ë¦¬ ê²°ê³¼ë¥¼ Slackìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.\n\nâš ï¸ ì„¤ì • í•„ìš”:\n- Slack ìê²©ì¦ëª… ì—°ê²°"
    },
    {
      "id": "note-intro",
      "name": "ì›Œí¬í”Œë¡œìš° ì•ˆë‚´",
      "type": "n8n-nodes-base.stickyNote",
      "position": [-200, -150],
      "parameters": {
        "width": 400,
        "height": 350,
        "content": "## ğŸ“„ Mistral OCR ë¬¸ì„œ/ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ì¶”ì¶œ\n\n### ê¸°ëŠ¥\nMistral AIì˜ OCR ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ PDF ë¬¸ì„œë‚˜ ì´ë¯¸ì§€ì—ì„œ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.\n\n### ì§€ì› í˜•ì‹\n- **ë¬¸ì„œ**: PDF (ìµœëŒ€ 64í˜ì´ì§€)\n- **ì´ë¯¸ì§€**: PNG, JPG, JPEG, GIF, WEBP (ìµœëŒ€ 10,000í”½ì…€)\n\n### í•„ìˆ˜ ì„¤ì •\n1. **Mistral Cloud API ìê²©ì¦ëª…**\n   - https://console.mistral.ai ì—ì„œ API í‚¤ ë°œê¸‰\n2. **Slack ìê²©ì¦ëª…** - ê²°ê³¼ ì•Œë¦¼\n\n### ë¹„ìš©\n- í˜ì´ì§€ë‹¹ ì•½ $0.001 (ë§¤ìš° ì €ë ´)"
      },
      "typeVersion": 1
    },
    {
      "id": "note-private",
      "name": "ë¹„ê³µê°œ íŒŒì¼ ì•ˆë‚´",
      "type": "n8n-nodes-base.stickyNote",
      "position": [400, -150],
      "parameters": {
        "width": 350,
        "height": 200,
        "color": 7,
        "content": "### ğŸ’¡ ë¹„ê³µê°œ íŒŒì¼ ì²˜ë¦¬\n\në¹„ê³µê°œ íŒŒì¼ì˜ ê²½ìš°:\n1. Mistralì— íŒŒì¼ ì—…ë¡œë“œ\n2. Signed URL íšë“\n3. OCR ì²˜ë¦¬\n\nìì„¸í•œ ë°©ë²•ì€ ì›ë³¸ ì›Œí¬í”Œë¡œìš°ì˜ Example 2ë¥¼ ì°¸ê³ í•˜ì„¸ìš”."
      },
      "typeVersion": 1
    }
  ],
  "connections": {
    "ìˆ˜ë™ ì‹¤í–‰": {"main": [[{"node": "ë¬¸ì„œ URL ì„¤ì •", "type": "main", "index": 0}, {"node": "ì´ë¯¸ì§€ URL ì„¤ì •", "type": "main", "index": 0}]]},
    "ë¬¸ì„œ URL ì„¤ì •": {"main": [[{"node": "ë¬¸ì„œ OCR ì²˜ë¦¬", "type": "main", "index": 0}]]},
    "ì´ë¯¸ì§€ URL ì„¤ì •": {"main": [[{"node": "ì´ë¯¸ì§€ OCR ì²˜ë¦¬", "type": "main", "index": 0}]]},
    "ë¬¸ì„œ OCR ì²˜ë¦¬": {"main": [[{"node": "ê²°ê³¼ ë³‘í•©", "type": "main", "index": 0}]]},
    "ì´ë¯¸ì§€ OCR ì²˜ë¦¬": {"main": [[{"node": "ê²°ê³¼ ë³‘í•©", "type": "main", "index": 1}]]},
    "ê²°ê³¼ ë³‘í•©": {"main": [[{"node": "í…ìŠ¤íŠ¸ ì¶”ì¶œ", "type": "main", "index": 0}]]},
    "í…ìŠ¤íŠ¸ ì¶”ì¶œ": {"main": [[{"node": "Slack ê²°ê³¼ ì•Œë¦¼", "type": "main", "index": 0}]]}
  },
  "settings": {"executionOrder": "v1"}
}

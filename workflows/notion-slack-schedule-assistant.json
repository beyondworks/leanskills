{
  "name": "[ìŠ¤ì¼€ì¤„ë¹„ì„œ] Notion ì¼ì • ê´€ë¦¬ + Slack í†µí•©",
  "nodes": [
    {
      "id": "slack-trigger",
      "name": "Slack ë©”ì‹œì§€ ìˆ˜ì‹ ",
      "type": "n8n-nodes-base.slackTrigger",
      "position": [0, 400],
      "parameters": {
        "event": "message",
        "options": {}
      },
      "webhookId": "schedule-slack-trigger",
      "typeVersion": 1,
      "notes": "ğŸ“¨ Slack #schedule ì±„ë„ì—ì„œ ë©”ì‹œì§€ ìˆ˜ì‹ \n\nâš ï¸ ì„¤ì •:\n1. Slack ìê²©ì¦ëª… ì—°ê²°\n2. Event Subscriptions ì„¤ì • í•„ìš”"
    },
    {
      "id": "morning-trigger",
      "name": "ë§¤ì¼ ì˜¤ì „ 9ì‹œ ë¸Œë¦¬í•‘",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [0, 800],
      "parameters": {
        "rule": {
          "interval": [{"field": "cronExpression", "expression": "0 9 * * *"}]
        }
      },
      "typeVersion": 1.2,
      "notes": "â° ë§¤ì¼ ì˜¤ì „ 9ì‹œ íŠ¸ë¦¬ê±°\n\ní•œêµ­ í‘œì¤€ì‹œ(KST) ê¸°ì¤€ìœ¼ë¡œ ë§¤ì¼ ì˜¤ì „ 9ì‹œì— ì‹¤í–‰ë©ë‹ˆë‹¤."
    },
    {
      "id": "reminder-trigger",
      "name": "ë¦¬ë§ˆì¸ë” ì²´í¬ (ë§¤ 10ë¶„)",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [0, 1200],
      "parameters": {
        "rule": {
          "interval": [{"field": "cronExpression", "expression": "*/10 * * * *"}]
        }
      },
      "typeVersion": 1.2,
      "notes": "â±ï¸ 10ë¶„ë§ˆë‹¤ ë¦¬ë§ˆì¸ë” ì²´í¬\n\në§¤ 10ë¶„ë§ˆë‹¤ ì‹¤í–‰ë˜ì–´ 60ë¶„/30ë¶„/10ë¶„ ì „ ì¼ì •ì„ í™•ì¸í•©ë‹ˆë‹¤."
    },
    {
      "id": "filter-bot",
      "name": "ë´‡ ë©”ì‹œì§€ í•„í„°",
      "type": "n8n-nodes-base.if",
      "position": [240, 400],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {"version": 2, "caseSensitive": true, "typeValidation": "strict"},
          "combinator": "and",
          "conditions": [
            {"id": "1", "operator": {"type": "boolean", "operation": "false", "singleValue": true}, "leftValue": "={{ $json.bot_id ? true : false }}", "rightValue": ""}
          ]
        }
      },
      "typeVersion": 2.2,
      "notes": "ğŸ¤– ë´‡ ë©”ì‹œì§€ í•„í„°ë§\n\në´‡ì´ ë³´ë‚¸ ë©”ì‹œì§€ëŠ” ë¬´ì‹œ"
    },
    {
      "id": "get-today-tasks-chat",
      "name": "ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ëŒ€í™”)",
      "type": "n8n-nodes-base.notion",
      "position": [480, 300],
      "parameters": {
        "resource": "databasePage",
        "operation": "getMany",
        "databaseId": {"__rl": true, "mode": "id", "value": "242003c7-f7be-804a-9d6e-f76d5d0347b4"},
        "filterType": "manual",
        "filters": {
          "conditions": [
            {
              "key": "Date|date",
              "condition": "equals",
              "dateValue": "={{ $now.toFormat('yyyy-MM-dd') }}"
            }
          ]
        },
        "options": {"downloadFiles": false}
      },
      "typeVersion": 2.2,
      "notes": "ğŸ“… ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ\n\nNotionì—ì„œ ì˜¤ëŠ˜ ë‚ ì§œì˜ ëª¨ë“  ì¼ì •ì„ ê°€ì ¸ì˜µë‹ˆë‹¤."
    },
    {
      "id": "get-incomplete-tasks-chat",
      "name": "ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ëŒ€í™”)",
      "type": "n8n-nodes-base.notion",
      "position": [480, 500],
      "parameters": {
        "resource": "databasePage",
        "operation": "getMany",
        "databaseId": {"__rl": true, "mode": "id", "value": "242003c7-f7be-804a-9d6e-f76d5d0347b4"},
        "filterType": "manual",
        "filters": {
          "conditions": [
            {"key": "Completed|checkbox", "condition": "equals", "checkboxValue": false},
            {"key": "Date|date", "condition": "past"}
          ]
        },
        "options": {"downloadFiles": false}
      },
      "typeVersion": 2.2,
      "notes": "â° ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ\n\nê³¼ê±° ë‚ ì§œì˜ ë¯¸ì™„ë£Œ ì¼ì •ì„ ì¡°íšŒí•©ë‹ˆë‹¤."
    },
    {
      "id": "get-tomorrow-tasks-chat",
      "name": "ë‚´ì¼ ì¼ì • ì¡°íšŒ (ëŒ€í™”)",
      "type": "n8n-nodes-base.notion",
      "position": [480, 700],
      "parameters": {
        "resource": "databasePage",
        "operation": "getMany",
        "databaseId": {"__rl": true, "mode": "id", "value": "242003c7-f7be-804a-9d6e-f76d5d0347b4"},
        "filterType": "manual",
        "filters": {
          "conditions": [
            {
              "key": "Date|date",
              "condition": "equals",
              "dateValue": "={{ $now.plus({days: 1}).toFormat('yyyy-MM-dd') }}"
            }
          ]
        },
        "options": {"downloadFiles": false}
      },
      "typeVersion": 2.2,
      "notes": "ğŸ“† ë‚´ì¼ ì¼ì • ì¡°íšŒ"
    },
    {
      "id": "merge-chat-data",
      "name": "ë°ì´í„° ë³‘í•© (ëŒ€í™”)",
      "type": "n8n-nodes-base.merge",
      "position": [720, 400],
      "parameters": {
        "mode": "combine",
        "options": {}
      },
      "typeVersion": 3.2,
      "notes": "ğŸ”„ ì¼ì • ë°ì´í„° ë³‘í•©"
    },
    {
      "id": "ai-chat-agent",
      "name": "AI ìŠ¤ì¼€ì¤„ ì–´ì‹œìŠ¤í„´íŠ¸",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [960, 400],
      "parameters": {
        "text": "=ë‹¹ì‹ ì€ í•œêµ­ì–´ ìŠ¤ì¼€ì¤„ ê´€ë¦¬ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.\n\n## ì‚¬ìš©ì ì§ˆë¬¸\n{{ $('Slack ë©”ì‹œì§€ ìˆ˜ì‹ ').item.json.text }}\n\n## í˜„ì¬ ì‹œê°\n{{ $now.setZone('Asia/Seoul').toFormat('yyyy-MM-dd HH:mm') }} (KST)\n\n## ì˜¤ëŠ˜ ì¼ì •\n{{ $('ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ëŒ€í™”)').all().length > 0 \n  ? $('ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ëŒ€í™”)').all().map(item => {\n      const title = item.json.properties['Entry name']?.title?.[0]?.plain_text || 'N/A';\n      const time = item.json.properties['Time (Entry)']?.rich_text?.[0]?.plain_text || 'ì‹œê°„ ë¯¸ì •';\n      const completed = item.json.properties['Completed']?.checkbox || false;\n      const category = item.json.properties['Category']?.select?.name || '';\n      return `- ${completed ? 'âœ…' : 'â¬œ'} [${category}] ${title} (${time})`;\n    }).join('\\n')\n  : 'ì˜¤ëŠ˜ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.'\n}}\n\n## ë¯¸ì™„ë£Œ ì¼ì • (ê³¼ê±°)\n{{ $('ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ëŒ€í™”)').all().length > 0\n  ? $('ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ëŒ€í™”)').all().map(item => {\n      const title = item.json.properties['Entry name']?.title?.[0]?.plain_text || 'N/A';\n      const date = item.json.properties['Date']?.date?.start || 'N/A';\n      return `- âš ï¸ ${title} (${date})`;\n    }).join('\\n')\n  : 'ë¯¸ì™„ë£Œ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.'\n}}\n\n## ë‚´ì¼ ì¼ì •\n{{ $('ë‚´ì¼ ì¼ì • ì¡°íšŒ (ëŒ€í™”)').all().length > 0\n  ? $('ë‚´ì¼ ì¼ì • ì¡°íšŒ (ëŒ€í™”)').all().map(item => {\n      const title = item.json.properties['Entry name']?.title?.[0]?.plain_text || 'N/A';\n      const time = item.json.properties['Time (Entry)']?.rich_text?.[0]?.plain_text || 'ì‹œê°„ ë¯¸ì •';\n      return `- ğŸ“Œ ${title} (${time})`;\n    }).join('\\n')\n  : 'ë‚´ì¼ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.'\n}}\n\n## ì§€ì‹œì‚¬í•­\n1. ìœ„ ì¼ì • ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‚¬ìš©ì ì§ˆë¬¸ì— ì¹œì ˆí•˜ê²Œ ë‹µë³€í•˜ì„¸ìš”.\n2. ì¼ì • ì¶”ê°€/ìˆ˜ì • ìš”ì²­ ì‹œ JSON í˜•ì‹ìœ¼ë¡œ actionì„ í¬í•¨í•˜ì„¸ìš”.\n3. ì‹œê°„ ê°€ìš©ì„± ì§ˆë¬¸ ì‹œ í•´ë‹¹ ì‹œê°„ëŒ€ì˜ ì¼ì •ì„ í™•ì¸í•˜ì—¬ ë‹µë³€í•˜ì„¸ìš”.\n\n## ì‘ë‹µ í˜•ì‹\nì¼ë°˜ ì§ˆë¬¸: ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ ë‹µë³€\n\nì¼ì • ì¶”ê°€ ìš”ì²­ì‹œ ë§ˆì§€ë§‰ì— JSON í¬í•¨:\n```json\n{\"action\":\"create\",\"title\":\"ì¼ì •ëª…\",\"date\":\"2026-02-04\",\"time\":\"14:00\",\"category\":\"ë¯¸íŒ…\",\"notes\":\"\",\"location\":\"\"}\n```\n\nì¹´í…Œê³ ë¦¬ ì˜µì…˜: API Keys, YouTube, ê°œë°œ, Threads, ê¸°íš, ê°•ì˜, ë””ìì¸, ì œì•ˆì„œ, íšŒì˜, ìœ„íƒíŒë§¤, ê¸°íƒ€, Video, ì›ê³ ",
        "options": {}
      },
      "typeVersion": 3,
      "notes": "ğŸ§  AI ìŠ¤ì¼€ì¤„ ì–´ì‹œìŠ¤í„´íŠ¸\n\nNotion ì¼ì • ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì ì§ˆë¬¸ì— ë‹µë³€í•˜ê³ , ì¼ì • ì¶”ê°€/ìˆ˜ì • ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤."
    },
    {
      "id": "openai-chat-model",
      "name": "OpenAI GPT-4o",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [960, 600],
      "parameters": {
        "options": {"temperature": 0.3},
        "model": "gpt-4o"
      },
      "typeVersion": 1.3,
      "notes": "ğŸ§  GPT-4o ëª¨ë¸"
    },
    {
      "id": "parse-chat-response",
      "name": "ì‘ë‹µ íŒŒì‹± ë° ì•¡ì…˜ ì¶”ì¶œ",
      "type": "n8n-nodes-base.code",
      "position": [1200, 400],
      "parameters": {
        "jsCode": "const output = $input.first().json.output || $input.first().json.text || '';\n\n// JSON ì•¡ì…˜ ì¶”ì¶œ ì‹œë„\nlet action = null;\nlet response = output;\n\ntry {\n  const jsonMatch = output.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n  if (jsonMatch) {\n    action = JSON.parse(jsonMatch[1]);\n    response = output.replace(/```json[\\s\\S]*?```/g, '').trim();\n  }\n} catch (e) {\n  // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì‘ë‹µë§Œ ì‚¬ìš©\n}\n\nreturn [{\n  json: {\n    response: response,\n    action: action,\n    hasAction: action !== null && action.action === 'create'\n  }\n}];"
      },
      "typeVersion": 2,
      "notes": "ğŸ”„ ì‘ë‹µ íŒŒì‹±\n\nAI ì‘ë‹µì—ì„œ í…ìŠ¤íŠ¸ì™€ JSON ì•¡ì…˜ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤."
    },
    {
      "id": "check-action",
      "name": "ì•¡ì…˜ í™•ì¸",
      "type": "n8n-nodes-base.if",
      "position": [1440, 400],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {"version": 2, "caseSensitive": true, "typeValidation": "strict"},
          "combinator": "and",
          "conditions": [
            {"id": "1", "operator": {"type": "boolean", "operation": "true", "singleValue": true}, "leftValue": "={{ $json.hasAction }}", "rightValue": ""}
          ]
        }
      },
      "typeVersion": 2.2,
      "notes": "ğŸ”€ ì•¡ì…˜ í™•ì¸\n\nì¼ì • ìƒì„± ì•¡ì…˜ì´ ìˆëŠ”ì§€ í™•ì¸"
    },
    {
      "id": "create-schedule",
      "name": "ì¼ì • ìƒì„±",
      "type": "n8n-nodes-base.notion",
      "position": [1680, 300],
      "parameters": {
        "resource": "databasePage",
        "operation": "create",
        "databaseId": {"__rl": true, "mode": "id", "value": "242003c7-f7be-804a-9d6e-f76d5d0347b4"},
        "propertiesUi": {
          "propertyValues": [
            {"key": "Entry name|title", "textContent": "={{ $json.action.title }}"},
            {"key": "Date|date", "date": "={{ $json.action.date }}"},
            {"key": "Time (Entry)|rich_text", "textContent": "={{ $json.action.time }}"},
            {"key": "Category|select", "selectValue": "={{ $json.action.category || 'ê¸°íƒ€' }}"},
            {"key": "Notes|rich_text", "textContent": "={{ $json.action.notes || '' }}"},
            {"key": "Location (Entry)|rich_text", "textContent": "={{ $json.action.location || '' }}"},
            {"key": "Relation|relation", "databasePages": [{"id": "276003c7-f7be-8012-889c-ffb91c786af1"}]}
          ]
        },
        "options": {}
      },
      "typeVersion": 2.2,
      "notes": "â• Notion ì¼ì • ìƒì„±\n\nRelationì€ í•­ìƒ 'Schedule' ì„ íƒ"
    },
    {
      "id": "send-chat-response",
      "name": "Slack ë‹µë³€ ì „ì†¡",
      "type": "n8n-nodes-base.slack",
      "position": [1920, 400],
      "parameters": {
        "select": "channel",
        "channelId": {"__rl": true, "mode": "id", "value": "={{ $('Slack ë©”ì‹œì§€ ìˆ˜ì‹ ').item.json.channel }}"},
        "text": "={{ $('ì‘ë‹µ íŒŒì‹± ë° ì•¡ì…˜ ì¶”ì¶œ').item.json.response }}{{ $json.hasAction ? '\\n\\nâœ… ì¼ì •ì´ Notionì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!' : '' }}",
        "otherOptions": {
          "thread_ts": "={{ $('Slack ë©”ì‹œì§€ ìˆ˜ì‹ ').item.json.ts }}"
        }
      },
      "typeVersion": 2.3,
      "notes": "ğŸ’¬ Slack ë‹µë³€ ì „ì†¡\n\nì›ë³¸ ë©”ì‹œì§€ì— ìŠ¤ë ˆë“œë¡œ ë‹µë³€"
    },
    {
      "id": "get-today-tasks-briefing",
      "name": "ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘)",
      "type": "n8n-nodes-base.notion",
      "position": [240, 800],
      "parameters": {
        "resource": "databasePage",
        "operation": "getMany",
        "databaseId": {"__rl": true, "mode": "id", "value": "242003c7-f7be-804a-9d6e-f76d5d0347b4"},
        "filterType": "manual",
        "filters": {
          "conditions": [
            {
              "key": "Date|date",
              "condition": "equals",
              "dateValue": "={{ $now.toFormat('yyyy-MM-dd') }}"
            }
          ]
        },
        "options": {"downloadFiles": false}
      },
      "typeVersion": 2.2,
      "notes": "ğŸ“… ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘ìš©)"
    },
    {
      "id": "get-incomplete-tasks-briefing",
      "name": "ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘)",
      "type": "n8n-nodes-base.notion",
      "position": [240, 1000],
      "parameters": {
        "resource": "databasePage",
        "operation": "getMany",
        "databaseId": {"__rl": true, "mode": "id", "value": "242003c7-f7be-804a-9d6e-f76d5d0347b4"},
        "filterType": "manual",
        "filters": {
          "conditions": [
            {"key": "Completed|checkbox", "condition": "equals", "checkboxValue": false},
            {"key": "Date|date", "condition": "past"}
          ]
        },
        "options": {"downloadFiles": false}
      },
      "typeVersion": 2.2,
      "notes": "â° ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘ìš©)"
    },
    {
      "id": "format-briefing",
      "name": "ë¸Œë¦¬í•‘ ë©”ì‹œì§€ ìƒì„±",
      "type": "n8n-nodes-base.code",
      "position": [480, 900],
      "parameters": {
        "jsCode": "const today = $now.setZone('Asia/Seoul').toFormat('yyyyë…„ MMì›” ddì¼ EEEE', {locale: 'ko'});\n\nconst todayTasks = $('ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘)').all();\nconst incompleteTasks = $('ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘)').all();\n\nlet message = `:sunny: *${today} ëª¨ë‹ ë¸Œë¦¬í•‘*\\n\\n`;\n\n// ë¯¸ì™„ë£Œ ì¼ì •\nif (incompleteTasks.length > 0) {\n  message += `:warning: *ë°€ë¦° ì¼ì • (${incompleteTasks.length}ê±´)*\\n`;\n  incompleteTasks.forEach(item => {\n    const title = item.json.properties['Entry name']?.title?.[0]?.plain_text || 'N/A';\n    const date = item.json.properties['Date']?.date?.start || 'N/A';\n    message += `â€¢ ${title} (${date})\\n`;\n  });\n  message += '\\n';\n}\n\n// ì˜¤ëŠ˜ í•  ì¼\nmessage += `:clipboard: *ì˜¤ëŠ˜ í•  ì¼ (${todayTasks.length}ê±´)*\\n`;\nif (todayTasks.length > 0) {\n  todayTasks.forEach(item => {\n    const title = item.json.properties['Entry name']?.title?.[0]?.plain_text || 'N/A';\n    const time = item.json.properties['Time (Entry)']?.rich_text?.[0]?.plain_text || 'ì‹œê°„ ë¯¸ì •';\n    const category = item.json.properties['Category']?.select?.name || '';\n    const completed = item.json.properties['Completed']?.checkbox || false;\n    message += `â€¢ ${completed ? 'âœ…' : 'â¬œ'} [${category}] ${title} (${time})\\n`;\n  });\n} else {\n  message += 'ì˜¤ëŠ˜ì€ ì˜ˆì •ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤. ğŸ‰\\n';\n}\n\nmessage += '\\nì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”! ğŸ’ª';\n\nreturn [{ json: { message } }];"
      },
      "typeVersion": 2,
      "notes": "ğŸ“ ë¸Œë¦¬í•‘ ë©”ì‹œì§€ ìƒì„±\n\në¯¸ì™„ë£Œ ì¼ì •ê³¼ ì˜¤ëŠ˜ í•  ì¼ì„ ì •ë¦¬í•œ ë¸Œë¦¬í•‘ ë©”ì‹œì§€ ìƒì„±"
    },
    {
      "id": "send-briefing",
      "name": "ë¸Œë¦¬í•‘ ì „ì†¡",
      "type": "n8n-nodes-base.slack",
      "position": [720, 900],
      "parameters": {
        "select": "channel",
        "channelId": {"__rl": true, "mode": "name", "value": "#schedule"},
        "text": "={{ $json.message }}",
        "otherOptions": {}
      },
      "typeVersion": 2.3,
      "notes": "ğŸ“¢ Slack ë¸Œë¦¬í•‘ ì „ì†¡\n\n#schedule ì±„ë„ì— ë§¤ì¼ ì˜¤ì „ 9ì‹œ ë¸Œë¦¬í•‘"
    },
    {
      "id": "get-upcoming-tasks",
      "name": "ë‹¤ê°€ì˜¤ëŠ” ì¼ì • ì¡°íšŒ",
      "type": "n8n-nodes-base.notion",
      "position": [240, 1200],
      "parameters": {
        "resource": "databasePage",
        "operation": "getMany",
        "databaseId": {"__rl": true, "mode": "id", "value": "242003c7-f7be-804a-9d6e-f76d5d0347b4"},
        "filterType": "manual",
        "filters": {
          "conditions": [
            {"key": "Completed|checkbox", "condition": "equals", "checkboxValue": false},
            {
              "key": "Date|date",
              "condition": "equals",
              "dateValue": "={{ $now.toFormat('yyyy-MM-dd') }}"
            }
          ]
        },
        "options": {"downloadFiles": false}
      },
      "typeVersion": 2.2,
      "notes": "ğŸ“… ì˜¤ëŠ˜ ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ë¦¬ë§ˆì¸ë”ìš©)"
    },
    {
      "id": "check-reminder-times",
      "name": "ë¦¬ë§ˆì¸ë” ì‹œê°„ ì²´í¬",
      "type": "n8n-nodes-base.code",
      "position": [480, 1200],
      "parameters": {
        "jsCode": "const now = $now.setZone('Asia/Seoul');\nconst tasks = $input.all();\nconst reminders = [];\n\nfor (const task of tasks) {\n  const title = task.json.properties['Entry name']?.title?.[0]?.plain_text || 'N/A';\n  const timeStr = task.json.properties['Time (Entry)']?.rich_text?.[0]?.plain_text || '';\n  const location = task.json.properties['Location (Entry)']?.rich_text?.[0]?.plain_text || '';\n  const pageId = task.json.id;\n  \n  if (!timeStr) continue;\n  \n  // ì‹œê°„ íŒŒì‹± (HH:mm í˜•ì‹ ê°€ì •)\n  const timeMatch = timeStr.match(/(\\d{1,2}):(\\d{2})/);\n  if (!timeMatch) continue;\n  \n  const taskHour = parseInt(timeMatch[1]);\n  const taskMinute = parseInt(timeMatch[2]);\n  const taskTime = now.set({ hour: taskHour, minute: taskMinute, second: 0 });\n  \n  const diffMinutes = taskTime.diff(now, 'minutes').minutes;\n  \n  // 60ë¶„ ì „, 30ë¶„ ì „, 10ë¶„ ì „ ì²´í¬ (Â±5ë¶„ ì˜¤ì°¨ í—ˆìš©)\n  let reminderType = null;\n  if (diffMinutes >= 55 && diffMinutes <= 65) {\n    reminderType = '1ì‹œê°„';\n  } else if (diffMinutes >= 25 && diffMinutes <= 35) {\n    reminderType = '30ë¶„';\n  } else if (diffMinutes >= 5 && diffMinutes <= 15) {\n    reminderType = '10ë¶„';\n  }\n  \n  if (reminderType) {\n    reminders.push({\n      title,\n      time: timeStr,\n      location,\n      reminderType,\n      pageId\n    });\n  }\n}\n\nreturn reminders.length > 0 ? reminders.map(r => ({ json: r })) : [];"
      },
      "typeVersion": 2,
      "notes": "â±ï¸ ë¦¬ë§ˆì¸ë” ì‹œê°„ ì²´í¬\n\n1ì‹œê°„/30ë¶„/10ë¶„ ì „ ì¼ì • í™•ì¸"
    },
    {
      "id": "send-reminder",
      "name": "ë¦¬ë§ˆì¸ë” ì „ì†¡",
      "type": "n8n-nodes-base.slack",
      "position": [720, 1200],
      "parameters": {
        "select": "channel",
        "channelId": {"__rl": true, "mode": "name", "value": "#schedule"},
        "text": "=:bell: *ì¼ì • ì•Œë¦¼*\\n\\n:clock{{ Math.floor(parseInt($json.time.split(':')[0]) % 12) || 12 }}: *{{ $json.title }}*\\nâ° {{ $json.reminderType }} í›„ ì‹œì‘ ({{ $json.time }}){{ $json.location ? '\\nğŸ“ ' + $json.location : '' }}\\n\\nì¤€ë¹„í•˜ì„¸ìš”! ğŸƒ",
        "otherOptions": {}
      },
      "typeVersion": 2.3,
      "notes": "ğŸ”” ë¦¬ë§ˆì¸ë” ì•Œë¦¼ ì „ì†¡"
    },
    {
      "id": "check-past-tasks",
      "name": "ì§€ë‚œ ì¼ì • ì²´í¬ (ë§¤ 10ë¶„)",
      "type": "n8n-nodes-base.code",
      "position": [480, 1400],
      "parameters": {
        "jsCode": "const now = $now.setZone('Asia/Seoul');\nconst tasks = $('ë‹¤ê°€ì˜¤ëŠ” ì¼ì • ì¡°íšŒ').all();\nconst pastTasks = [];\n\nfor (const task of tasks) {\n  const title = task.json.properties['Entry name']?.title?.[0]?.plain_text || 'N/A';\n  const timeStr = task.json.properties['Time (Entry)']?.rich_text?.[0]?.plain_text || '';\n  const pageId = task.json.id;\n  const completed = task.json.properties['Completed']?.checkbox || false;\n  \n  if (!timeStr || completed) continue;\n  \n  // ì‹œê°„ íŒŒì‹±\n  const timeMatch = timeStr.match(/(\\d{1,2}):(\\d{2})/);\n  if (!timeMatch) continue;\n  \n  const taskHour = parseInt(timeMatch[1]);\n  const taskMinute = parseInt(timeMatch[2]);\n  const taskTime = now.set({ hour: taskHour, minute: taskMinute, second: 0 });\n  \n  const diffMinutes = taskTime.diff(now, 'minutes').minutes;\n  \n  // ì¼ì • ì‹œê°„ì´ ì§€ë‚œ ê²½ìš° (5-15ë¶„ ì§€ë‚¨)\n  if (diffMinutes >= -15 && diffMinutes <= -5) {\n    pastTasks.push({\n      title,\n      time: timeStr,\n      pageId\n    });\n  }\n}\n\nreturn pastTasks.length > 0 ? pastTasks.map(t => ({ json: t })) : [];"
      },
      "typeVersion": 2,
      "notes": "â° ì§€ë‚œ ì¼ì • ì²´í¬\n\nì‹œê°„ì´ ì§€ë‚œ ë¯¸ì™„ë£Œ ì¼ì • í™•ì¸"
    },
    {
      "id": "send-completion-prompt",
      "name": "ì™„ë£Œ í™•ì¸ ë©”ì‹œì§€",
      "type": "n8n-nodes-base.slack",
      "position": [720, 1400],
      "parameters": {
        "select": "channel",
        "channelId": {"__rl": true, "mode": "name", "value": "#schedule"},
        "text": "=:hourglass_flowing_sand: *ì¼ì • ì™„ë£Œ í™•ì¸*\\n\\n*{{ $json.title }}* ({{ $json.time }}) ì¼ì •ì´ ëë‚¬ë‚˜ìš”?\\n\\nì™„ë£Œ ì—¬ë¶€ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”!",
        "otherOptions": {
          "attachments": [
            {
              "fallback": "ì¼ì • ì™„ë£Œ í™•ì¸",
              "callback_id": "schedule_completion_{{ $json.pageId }}",
              "actions": [
                {"name": "complete", "text": "âœ… ì™„ë£Œ", "type": "button", "value": "complete_{{ $json.pageId }}", "style": "primary"},
                {"name": "postpone", "text": "â¸ï¸ ë³´ë¥˜", "type": "button", "value": "postpone_{{ $json.pageId }}"}
              ]
            }
          ]
        }
      },
      "typeVersion": 2.3,
      "notes": "ğŸ“‹ ì™„ë£Œ í™•ì¸ ë©”ì‹œì§€\n\nì™„ë£Œ/ë³´ë¥˜ ë²„íŠ¼ì´ í¬í•¨ëœ ì¸í„°ë™í‹°ë¸Œ ë©”ì‹œì§€"
    },
    {
      "id": "button-trigger",
      "name": "ë²„íŠ¼ í´ë¦­ ìˆ˜ì‹ ",
      "type": "n8n-nodes-base.webhook",
      "position": [0, 1600],
      "parameters": {
        "path": "schedule-button-callback",
        "httpMethod": "POST",
        "options": {}
      },
      "webhookId": "schedule-button-callback",
      "typeVersion": 2,
      "notes": "ğŸ”˜ Slack ë²„íŠ¼ í´ë¦­ ìˆ˜ì‹ \n\nâš ï¸ ì´ Webhook URLì„ Slack Appì˜ Interactive Componentsì— ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤."
    },
    {
      "id": "parse-button-action",
      "name": "ë²„íŠ¼ ì•¡ì…˜ íŒŒì‹±",
      "type": "n8n-nodes-base.code",
      "position": [240, 1600],
      "parameters": {
        "jsCode": "const payload = $input.first().json.body?.payload;\nif (!payload) return [];\n\nconst data = JSON.parse(payload);\nconst action = data.actions?.[0];\nif (!action) return [];\n\nconst [actionType, pageId] = action.value.split('_');\n\nreturn [{\n  json: {\n    actionType,\n    pageId,\n    userId: data.user?.id,\n    channelId: data.channel?.id,\n    responseUrl: data.response_url\n  }\n}];"
      },
      "typeVersion": 2,
      "notes": "ğŸ”„ ë²„íŠ¼ ì•¡ì…˜ íŒŒì‹±"
    },
    {
      "id": "action-switch",
      "name": "ì•¡ì…˜ ë¶„ê¸°",
      "type": "n8n-nodes-base.switch",
      "position": [480, 1600],
      "parameters": {
        "dataType": "string",
        "value1": "={{ $json.actionType }}",
        "rules": {
          "rules": [
            {"value2": "complete"},
            {"value2": "postpone"}
          ]
        }
      },
      "typeVersion": 3.2,
      "notes": "ğŸ”€ ì™„ë£Œ/ë³´ë¥˜ ë¶„ê¸°"
    },
    {
      "id": "mark-complete",
      "name": "ì™„ë£Œ ì²˜ë¦¬",
      "type": "n8n-nodes-base.notion",
      "position": [720, 1500],
      "parameters": {
        "resource": "databasePage",
        "operation": "update",
        "pageId": "={{ $json.pageId }}",
        "propertiesUi": {
          "propertyValues": [
            {"key": "Completed|checkbox", "checkboxValue": true}
          ]
        },
        "options": {}
      },
      "typeVersion": 2.2,
      "notes": "âœ… Notion ì™„ë£Œ ì²´í¬\n\nCompleted ì²´í¬ë°•ìŠ¤ë¥¼ trueë¡œ ë³€ê²½"
    },
    {
      "id": "send-complete-confirm",
      "name": "ì™„ë£Œ í™•ì¸ ì‘ë‹µ",
      "type": "n8n-nodes-base.httpRequest",
      "position": [960, 1500],
      "parameters": {
        "url": "={{ $('ë²„íŠ¼ ì•¡ì…˜ íŒŒì‹±').item.json.responseUrl }}",
        "method": "POST",
        "options": {},
        "jsonBody": "{\"text\": \"âœ… ì¼ì •ì´ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤!\", \"replace_original\": true}",
        "sendBody": true,
        "specifyBody": "json"
      },
      "typeVersion": 4.2,
      "notes": "ğŸ“¤ ì™„ë£Œ í™•ì¸ ì‘ë‹µ"
    },
    {
      "id": "send-postpone-options",
      "name": "ë³´ë¥˜ ì˜µì…˜ ì•ˆë‚´",
      "type": "n8n-nodes-base.httpRequest",
      "position": [720, 1700],
      "parameters": {
        "url": "={{ $('ë²„íŠ¼ ì•¡ì…˜ íŒŒì‹±').item.json.responseUrl }}",
        "method": "POST",
        "options": {},
        "jsonBody": "{\"text\": \"â¸ï¸ ì¼ì • ë³´ë¥˜\\n\\nì¼ì •ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í• ê¹Œìš”?\\n- ìƒˆ ë‚ ì§œ/ì‹œê°„ì„ ì…ë ¥í•˜ë©´ ì¼ì •ì´ ë³€ê²½ë©ë‹ˆë‹¤\\n- 'ì·¨ì†Œ'ë¼ê³  ì…ë ¥í•˜ë©´ ì¼ì •ì´ ì™„ì „íˆ ë³´ë¥˜ë©ë‹ˆë‹¤\", \"replace_original\": true}",
        "sendBody": true,
        "specifyBody": "json"
      },
      "typeVersion": 4.2,
      "notes": "ğŸ“¤ ë³´ë¥˜ ì˜µì…˜ ì•ˆë‚´"
    },
    {
      "id": "note-workflow",
      "name": "ì›Œí¬í”Œë¡œìš° ê°€ì´ë“œ",
      "type": "n8n-nodes-base.stickyNote",
      "position": [-300, -100],
      "parameters": {
        "width": 600,
        "height": 500,
        "color": 4,
        "content": "## ğŸ“… Notion ìŠ¤ì¼€ì¤„ ë¹„ì„œ - í†µí•© ì›Œí¬í”Œë¡œìš°\n\n### ê¸°ëŠ¥ ìš”ì•½\n\n**1ï¸âƒ£ Slack ëŒ€í™” ì²˜ë¦¬** (ìƒë‹¨)\n- #schedule ì±„ë„ì—ì„œ ì¼ì • ì§ˆë¬¸ ì‹œ AI ë‹µë³€\n- ì¼ì • ì¶”ê°€ ìš”ì²­ ì‹œ ìë™ìœ¼ë¡œ Notionì— ìƒì„±\n\n**2ï¸âƒ£ ë§¤ì¼ ì˜¤ì „ 9ì‹œ ë¸Œë¦¬í•‘** (ì¤‘ë‹¨)\n- ë¯¸ì™„ë£Œ ì¼ì • ì•ˆë‚´\n- ì˜¤ëŠ˜ í•  ì¼ ëª©ë¡\n\n**3ï¸âƒ£ ì¼ì • ë¦¬ë§ˆì¸ë”** (í•˜ë‹¨)\n- 1ì‹œê°„/30ë¶„/10ë¶„ ì „ ì•Œë¦¼\n- ì¼ì • ì¢…ë£Œ í›„ ì™„ë£Œ í™•ì¸ ë²„íŠ¼\n\n**4ï¸âƒ£ ì™„ë£Œ/ë³´ë¥˜ ì²˜ë¦¬** (ìµœí•˜ë‹¨)\n- ì™„ë£Œ ë²„íŠ¼: Notionì—ì„œ ì²´í¬ë°•ìŠ¤ ì²´í¬\n- ë³´ë¥˜ ë²„íŠ¼: ì¼ì • ì¡°ì • ì•ˆë‚´\n\n---\n\n### í•„ìˆ˜ ì„¤ì •\n\n1. **Slack App ì„¤ì •**\n   - Event Subscriptions í™œì„±í™”\n   - Interactive Components ì„¤ì • (Webhook URL)\n   - OAuth Scopes: chat:write, channels:history, users:read\n\n2. **ìê²©ì¦ëª…**\n   - Slack ìê²©ì¦ëª…\n   - Notion ìê²©ì¦ëª…\n   - OpenAI API ìê²©ì¦ëª…\n\n3. **ì±„ë„**\n   - #schedule ì±„ë„ ìƒì„± í•„ìš”"
      },
      "typeVersion": 1
    },
    {
      "id": "note-db-info",
      "name": "ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´",
      "type": "n8n-nodes-base.stickyNote",
      "position": [1100, -100],
      "parameters": {
        "width": 400,
        "height": 250,
        "color": 7,
        "content": "### ğŸ“Š Notion ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´\n\n**Beyond_Tasks DB**\n`242003c7-f7be-804a-9d6e-f76d5d0347b4`\n\n**Schedule Relation ID**\n`276003c7-f7be-8012-889c-ffb91c786af1`\n\n**ì£¼ìš” ì†ì„±**\n- Entry name (title)\n- Date (date)\n- Time (Entry) (rich_text)\n- Category (select)\n- Notes (rich_text)\n- Location (Entry) (rich_text)\n- Completed (checkbox)\n- Relation â†’ Schedule"
      },
      "typeVersion": 1
    }
  ],
  "connections": {
    "Slack ë©”ì‹œì§€ ìˆ˜ì‹ ": {"main": [[{"node": "ë´‡ ë©”ì‹œì§€ í•„í„°", "type": "main", "index": 0}]]},
    "ë´‡ ë©”ì‹œì§€ í•„í„°": {"main": [[{"node": "ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ëŒ€í™”)", "type": "main", "index": 0}, {"node": "ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ëŒ€í™”)", "type": "main", "index": 0}, {"node": "ë‚´ì¼ ì¼ì • ì¡°íšŒ (ëŒ€í™”)", "type": "main", "index": 0}], []]},
    "ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ëŒ€í™”)": {"main": [[{"node": "ë°ì´í„° ë³‘í•© (ëŒ€í™”)", "type": "main", "index": 0}]]},
    "ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ëŒ€í™”)": {"main": [[{"node": "ë°ì´í„° ë³‘í•© (ëŒ€í™”)", "type": "main", "index": 1}]]},
    "ë‚´ì¼ ì¼ì • ì¡°íšŒ (ëŒ€í™”)": {"main": [[{"node": "ë°ì´í„° ë³‘í•© (ëŒ€í™”)", "type": "main", "index": 0}]]},
    "ë°ì´í„° ë³‘í•© (ëŒ€í™”)": {"main": [[{"node": "AI ìŠ¤ì¼€ì¤„ ì–´ì‹œìŠ¤í„´íŠ¸", "type": "main", "index": 0}]]},
    "AI ìŠ¤ì¼€ì¤„ ì–´ì‹œìŠ¤í„´íŠ¸": {"main": [[{"node": "ì‘ë‹µ íŒŒì‹± ë° ì•¡ì…˜ ì¶”ì¶œ", "type": "main", "index": 0}]]},
    "OpenAI GPT-4o": {"ai_languageModel": [[{"node": "AI ìŠ¤ì¼€ì¤„ ì–´ì‹œìŠ¤í„´íŠ¸", "type": "ai_languageModel", "index": 0}]]},
    "ì‘ë‹µ íŒŒì‹± ë° ì•¡ì…˜ ì¶”ì¶œ": {"main": [[{"node": "ì•¡ì…˜ í™•ì¸", "type": "main", "index": 0}]]},
    "ì•¡ì…˜ í™•ì¸": {"main": [[{"node": "ì¼ì • ìƒì„±", "type": "main", "index": 0}], [{"node": "Slack ë‹µë³€ ì „ì†¡", "type": "main", "index": 0}]]},
    "ì¼ì • ìƒì„±": {"main": [[{"node": "Slack ë‹µë³€ ì „ì†¡", "type": "main", "index": 0}]]},
    "ë§¤ì¼ ì˜¤ì „ 9ì‹œ ë¸Œë¦¬í•‘": {"main": [[{"node": "ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘)", "type": "main", "index": 0}, {"node": "ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘)", "type": "main", "index": 0}]]},
    "ì˜¤ëŠ˜ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘)": {"main": [[{"node": "ë¸Œë¦¬í•‘ ë©”ì‹œì§€ ìƒì„±", "type": "main", "index": 0}]]},
    "ë¯¸ì™„ë£Œ ì¼ì • ì¡°íšŒ (ë¸Œë¦¬í•‘)": {"main": [[{"node": "ë¸Œë¦¬í•‘ ë©”ì‹œì§€ ìƒì„±", "type": "main", "index": 0}]]},
    "ë¸Œë¦¬í•‘ ë©”ì‹œì§€ ìƒì„±": {"main": [[{"node": "ë¸Œë¦¬í•‘ ì „ì†¡", "type": "main", "index": 0}]]},
    "ë¦¬ë§ˆì¸ë” ì²´í¬ (ë§¤ 10ë¶„)": {"main": [[{"node": "ë‹¤ê°€ì˜¤ëŠ” ì¼ì • ì¡°íšŒ", "type": "main", "index": 0}]]},
    "ë‹¤ê°€ì˜¤ëŠ” ì¼ì • ì¡°íšŒ": {"main": [[{"node": "ë¦¬ë§ˆì¸ë” ì‹œê°„ ì²´í¬", "type": "main", "index": 0}, {"node": "ì§€ë‚œ ì¼ì • ì²´í¬ (ë§¤ 10ë¶„)", "type": "main", "index": 0}]]},
    "ë¦¬ë§ˆì¸ë” ì‹œê°„ ì²´í¬": {"main": [[{"node": "ë¦¬ë§ˆì¸ë” ì „ì†¡", "type": "main", "index": 0}]]},
    "ì§€ë‚œ ì¼ì • ì²´í¬ (ë§¤ 10ë¶„)": {"main": [[{"node": "ì™„ë£Œ í™•ì¸ ë©”ì‹œì§€", "type": "main", "index": 0}]]},
    "ë²„íŠ¼ í´ë¦­ ìˆ˜ì‹ ": {"main": [[{"node": "ë²„íŠ¼ ì•¡ì…˜ íŒŒì‹±", "type": "main", "index": 0}]]},
    "ë²„íŠ¼ ì•¡ì…˜ íŒŒì‹±": {"main": [[{"node": "ì•¡ì…˜ ë¶„ê¸°", "type": "main", "index": 0}]]},
    "ì•¡ì…˜ ë¶„ê¸°": {"main": [[{"node": "ì™„ë£Œ ì²˜ë¦¬", "type": "main", "index": 0}], [{"node": "ë³´ë¥˜ ì˜µì…˜ ì•ˆë‚´", "type": "main", "index": 0}]]},
    "ì™„ë£Œ ì²˜ë¦¬": {"main": [[{"node": "ì™„ë£Œ í™•ì¸ ì‘ë‹µ", "type": "main", "index": 0}]]}
  },
  "settings": {"executionOrder": "v1", "timezone": "Asia/Seoul"}
}
